<html>
<head>
  <title>onCreate中的savedInstanceState有何具体作用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303502 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="765"/>
<h1>onCreate中的savedInstanceState有何具体作用</h1>

<div>
<span><div><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">在activity的生命周期中，只要离开了可见阶段，或者说失去了焦点，activity就很可能被进程终止了！，被KILL掉了，，这时候，就需要有种机制，能保存当时的状态，这就是savedInstanceState的作用。</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">当一个Activity在PAUSE时，被kill之前，它可以调用onSaveInstanceState()来保存当前activity的状态信息（在paused状态时，要被KILLED的时候）。用来保存状态信息的Bundle会同时传给两个method,即onRestoreInstanceState() and onCreate().</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);">示例代码如下：</p><div style="word-wrap: break-word; color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace; margin-left: 9px; padding: 1px; background-color: rgb(255, 255, 255);"><div style="word-wrap: break-word;"><div style="word-wrap: break-word; padding: 3px; margin: 0px; font-weight: bold;">Java代码  <a><img src="onCreate中的savedInstanceState有何具体作用_files/Image.png" type="image/png" alt="收藏代码" style="border: 0px;"/></a></div></div><ol style="font-size: 1em; color: rgb(43, 145, 175);"><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;"><span style="color: rgb(127, 0, 85); font-weight: bold;">package</span> com.myandroid.test;  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;"><span style="color: rgb(127, 0, 85); font-weight: bold;">import</span> android.app.Activity;  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;"><span style="color: rgb(127, 0, 85); font-weight: bold;">import</span> android.os.Bundle;  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;"><span style="color: rgb(127, 0, 85); font-weight: bold;">import</span> android.util.Log;  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;"><span style="color: rgb(127, 0, 85); font-weight: bold;">public</span> <span style="color: rgb(127, 0, 85); font-weight: bold;">class</span> AndroidTest <span style="color: rgb(127, 0, 85); font-weight: bold;">extends</span> Activity {  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">     <span style="color: rgb(127, 0, 85); font-weight: bold;">private</span> <span style="color: rgb(127, 0, 85); font-weight: bold;">static</span> <span style="color: rgb(127, 0, 85); font-weight: bold;">final</span> String TAG = <span style="color: blue;">&quot;MyNewLog&quot;</span>;  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    <span style="color: rgb(0, 130, 0);">/** Called when the activity is first created. */</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    <span style="color: rgb(100, 100, 100);">@Override</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    <span style="color: rgb(127, 0, 85); font-weight: bold;">public</span> <span style="color: rgb(127, 0, 85); font-weight: bold;">void</span> onCreate(Bundle savedInstanceState) {  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        <span style="color: rgb(127, 0, 85); font-weight: bold;">super</span>.onCreate(savedInstanceState);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        <span style="color: rgb(0, 130, 0);">// If an instance of this activity had previously stopped, we can</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        <span style="color: rgb(0, 130, 0);">// get the original text it started with.</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        <span style="color: rgb(127, 0, 85); font-weight: bold;">if</span>(<span style="color: rgb(127, 0, 85); font-weight: bold;">null</span> != savedInstanceState)  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        {  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">            <span style="color: rgb(127, 0, 85); font-weight: bold;">int</span> IntTest = savedInstanceState.getInt(<span style="color: blue;">&quot;IntTest&quot;</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">            String StrTest = savedInstanceState.getString(<span style="color: blue;">&quot;StrTest&quot;</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">            Log.e(TAG, <span style="color: blue;">&quot;onCreate get the savedInstanceState+IntTest=&quot;</span>+IntTest+<span style="color: blue;">&quot;+StrTest=&quot;</span>+StrTest);          </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        }  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        setContentView(R.layout.main);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        Log.e(TAG, <span style="color: blue;">&quot;onCreate&quot;</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    }  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">     </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    <span style="color: rgb(100, 100, 100);">@Override</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    <span style="color: rgb(127, 0, 85); font-weight: bold;">public</span> <span style="color: rgb(127, 0, 85); font-weight: bold;">void</span> onSaveInstanceState(Bundle savedInstanceState) {  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        <span style="color: rgb(0, 130, 0);">// Save away the original text, so we still have it if the activity</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">        <span style="color: rgb(0, 130, 0);">// needs to be killed while paused.</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      savedInstanceState.putInt(<span style="color: blue;">&quot;IntTest&quot;</span>, <span style="color: rgb(192, 0, 0);">0</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      savedInstanceState.putString(<span style="color: blue;">&quot;StrTest&quot;</span>, <span style="color: blue;">&quot;savedInstanceState test&quot;</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      <span style="color: rgb(127, 0, 85); font-weight: bold;">super</span>.onSaveInstanceState(savedInstanceState);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      Log.e(TAG, <span style="color: blue;">&quot;onSaveInstanceState&quot;</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    }  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">     </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    <span style="color: rgb(100, 100, 100);">@Override</span>  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    <span style="color: rgb(127, 0, 85); font-weight: bold;">public</span> <span style="color: rgb(127, 0, 85); font-weight: bold;">void</span> onRestoreInstanceState(Bundle savedInstanceState) {  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      <span style="color: rgb(127, 0, 85); font-weight: bold;">super</span>.onRestoreInstanceState(savedInstanceState);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      <span style="color: rgb(127, 0, 85); font-weight: bold;">int</span> IntTest = savedInstanceState.getInt(<span style="color: blue;">&quot;IntTest&quot;</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      String StrTest = savedInstanceState.getString(<span style="color: blue;">&quot;StrTest&quot;</span>);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">      Log.e(TAG, <span style="color: blue;">&quot;onRestoreInstanceState+IntTest=&quot;</span>+IntTest+<span style="color: blue;">&quot;+StrTest=&quot;</span>+StrTest);  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">    }  </span></li><li style="font-size: 1em; background-color: rgb(250, 250, 250);"><span style="color: black;">} </span></li></ol></div></div></span>
</div></body></html> 