<html>
<head>
  <title>单例的线程安全和如何实现真正的单例</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303502 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="463"/>
<h1>单例的线程安全和如何实现真正的单例</h1>

<div>
<span><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">定义：确保某一个类只有一个实例，而且自行实例化并且向整个系统提供这个实例。</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">也就是 对象不能通过new 来实例化，而是有类本身来实例化一个自己的对象 ，并且创建一个对于这个对象的get方法。</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">饿汉单例</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">        </p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><pre style="box-sizing: border-box; overflow: auto; font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 0px 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245);">
            将类的对象作为类的成员变量，在类声明的时候就已经实例化。
            provate static final objct o = new object();
            public object getInstance(){
                    return o;
            }
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">懒汉单例</span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"/></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><pre style="box-sizing: border-box; overflow: auto; font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 0px 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245);">
            //在用户第一次调用getInstance的时候进行初始化           
            public object getInstance(){
                    if ( o == null ) {
                        o = new object();
                    }
                    return o;
            }
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">Double Check Look (DCL) 单例实现模式</span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">     </span></p><pre style="box-sizing: border-box; overflow: auto; font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 0px 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245);">
  public final class Obj{
            private volatile Obj obj ;
            public Obj getInstance(){
                if(obj == null){
                     synchronized(Obj.class){
                            if(obj == null){
                                  obj = new Obj();
                            }
                        }
                }
                return obj;
            }
        }
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box;">    </span><span style="box-sizing: border-box;">    </span><span style="box-sizing: border-box;">  .</span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box;">          等<br style="box-sizing: border-box;"/></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"/></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><hr style="box-sizing: content-box; height: 0px; margin-top: 20px; margin-bottom: 20px; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgb(238, 238, 238); color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"/></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"/></span></p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; font-weight: 600; color: rgb(68, 63, 63); margin: 10px 0px 24px; font-size: 25px; font-style: normal; font-variant: normal; font-stretch: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">单例模式 到了最后，各种各样的单例  最终都是在<span style="box-sizing: border-box; color: rgb(229, 51, 51); background-color: rgb(255, 255, 255);">解决 高并发下 线程安全的问题</span>，和<span style="box-sizing: border-box; color: rgb(229, 51, 51);">实现真正的单例</span></span><br style="box-sizing: border-box;"/></h4><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; font-weight: 600; color: rgb(68, 63, 63); margin: 10px 0px 24px; font-size: 25px; font-style: normal; font-variant: normal; font-stretch: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">问题1：线程安全问题， 例如在复杂高并发情况下，get方法在同一时间或者相隔很短时间内调用了两次。那么就会造成 出现两个实例的情况<br style="box-sizing: border-box;"/></h4><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(229, 51, 51);"><span style="box-sizing: border-box; color: rgb(0, 0, 0);">一般 线程安全的解决办法就是 使用volatile关键字来修饰变量，用synchronized来修饰方法体或一个方法块；</span><br style="box-sizing: border-box;"/></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(229, 51, 51);"><span style="box-sizing: border-box; color: rgb(0, 0, 0);"><br style="box-sizing: border-box;"/></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(229, 51, 51);"><span style="box-sizing: border-box; color: rgb(0, 0, 0);">例如：</span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(229, 51, 51);"><span style="box-sizing: border-box; color: rgb(0, 0, 0);"><br style="box-sizing: border-box;"/></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><pre style="box-sizing: border-box; overflow: auto; font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 0px 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245);">
public class SingleObject{
     private static volatile SingleObject so = null;

    public static SingleObject getInstance(){
              if(so == null ){
                   synchronized(SingleObject.class){
                           if(so == null ){
                                   so = new SingleObject();
                            }
                    }
              }
    }
}
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">可以看到在成员变量是用volatile修饰，可以保证对象每次都是从主内存中读取。</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">volatile 或多或少的会影响到性能</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">而get方法中有两层 判断： 第一层是因为 避免直接的不必要的同步， 第二次则是在同步锁内的判断，这一次则是为了创建实例。</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; color: rgb(229, 51, 51);">这样写的好处就是 在对象实例化过后，调用get方法 将不会再进行同步锁！</span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(229, 51, 51);"><span style="box-sizing: border-box; color: rgb(0, 0, 0);"><br style="box-sizing: border-box;"/></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"/></span></p><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; font-weight: 600; color: rgb(68, 63, 63); margin: 10px 0px 24px; font-size: 25px; font-style: normal; font-variant: normal; font-stretch: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">问题2： 序列化，  在java中通过序列化将一个单例 对象 写到磁盘中，然后再读回来，从而有效的获得一个实例。 即使构造方法是私有的，反序列化时依然可以通过特殊的途径去创建类的一个新的实例，相当于调用了该类的构造函数。</span><br style="box-sizing: border-box;"/></h4><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">            解决办法 ：</span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">            一 、使用枚举单例，没错就是枚举 <br style="box-sizing: border-box;"/></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">           </span></p><pre style="box-sizing: border-box; overflow: auto; font-size: 13px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 0px 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245);">
            public enum SingleEnumObject {
                    INSTANCE;
                    public void doSomething(){
                            System.out.println(&quot; class = &quot; +this);
                    }
            }
</pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"/></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">            枚举在java中与普通的类是一样的，不仅能够有字段，还能够有自己的方法，最重要的是默认枚举单例的创建时线程安全的，并且任何情况下它都是一个单例。<br style="box-sizing: border-box;"/></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">            </span></p><hr style="box-sizing: content-box; height: 0px; margin-top: 20px; margin-bottom: 20px; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgb(238, 238, 238); color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h4 style="box-sizing: border-box; font-family: Raleway, sans-serif; font-weight: 600; color: rgb(68, 63, 63); margin: 10px 0px 24px; font-size: 25px; font-style: normal; font-variant: normal; font-stretch: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"/></span>注意：<br style="box-sizing: border-box;"/></h4><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">    单例模式一般没有接口，所有扩展起来很难，除非修改代码。</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(118, 118, 118); font-family: 'Source Sans Pro', sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 14px;"><div>    <span style="box-sizing: border-box; color: rgb(229, 51, 51);">单例对象如果持有Context对象，很容易造成 内存溢出， 此时需要注意传递给单例对象的Context最好是 Application Context</span></div></div></div></span>
</div></body></html> 