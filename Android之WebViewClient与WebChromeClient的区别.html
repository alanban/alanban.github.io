<html>
<head>
  <title>Android之WebViewClient与WebChromeClient的区别</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303502 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="749"/>
<h1>Android之WebViewClient与WebChromeClient的区别</h1>

<div>
<span><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px;">ANDROID应用开发的时候可能会用到WEBVIEW这个组件，使用过程中可能会接触到WEBVIEWCLIENT与WEBCHROMECLIENT，那么这两个类到底有什么不同呢？</span></div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">WebViewClient主要帮助WebView处理各种通知、请求事件的，比如：</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px;">onLoadResource</span></div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onPageStart</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onPageFinish</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onReceiveError</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onReceivedHttpAuthRequest</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">WebChromeClient主要辅助WebView处理Javascript的对话框、网站图标、网站title、加载进度等比如</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px;">onCloseWindow(关闭WebView)</span></div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onCreateWindow()</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onJsAlert (WebView上alert无效，需要定制WebChromeClient处理弹出)</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onJsPrompt</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onJsConfirm</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onProgressChanged</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onReceivedIcon</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">onReceivedTitle</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">看上去他们有很多不同，实际使用的话，如果你的WebView只是用来处理一些html的页面内容，只用WebViewClient就行了，如果需要更丰富的处理效果，比如JS、进度条等，就要用到WebChromeClient。</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">更多的时候，你可以这样</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="font-family: 宋体; font-size: 12px; color: rgb(51, 51, 51);"><br/></span></div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">WebView webView;</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">webView= (WebView) findViewById(R.id.webview);</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">webView.setWebChromeClient(new WebChromeClient());</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">webView.setWebViewClient(new WebViewClient());</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">webView.getSettings().setJavaScriptEnabled(true);</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">webView.loadUrl(url);</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">这样你的WebView理论上就能有大部分需要实现的特色了</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);">当然，有些更精彩的内容还是需要你自己添加的</div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><br/></div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;">二、<span style="font-family: 宋体;"><strong>WebViewClient的方法说明</strong></span></span></div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><br/></div><div style="word-wrap: break-word; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin: 0px; padding: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51); font-family: 宋体;">1、public boolean shouldOverrideUrlLoading(WebView view, String url) { </span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">       view.loadUrl(url);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">       return true;</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">  }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">   在点击请求的是链接是才会调用，重写此方法返回true表明点击网页里面的链接还是在当前的webview里跳转，不跳到浏览器那边。</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">2、public void onReceivedSslError(WebView view, SslErrorHandler handler, android.net.http.SslError error) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">handler.proceed();</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">}</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">重写此方法可以让webview处理https请求。</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">3、public boolean shouldOverrideKeyEvent(WebView view, KeyEvent event) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            return super.shouldOverrideKeyEvent(view, event);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">        }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">    }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">重写此方法才能够处理在浏览器中的按键事件。</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">4、 public void onLoadResource(WebView view, String url) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            // TODO Auto-generated method stub</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            if (DEBUG) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">                Log.d(TAG, &quot; onLoadResource &quot;);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            super.onLoadResource(view, url);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">        }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">在加载页面资源时会调用，每一个资源（比如图片）的加载都会调用一次。</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">5、 public void onPageStarted(WebView view, String url, Bitmap favicon) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            // TODO Auto-generated method stub</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            if (DEBUG) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">                Log.d(TAG, &quot; onPageStarted &quot;);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">           if (url.endsWith(&quot;.apk&quot;)) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">                    download(url);//</span><a href="http://www.2cto.com/soft" target="_blank">下载</a><span style="color: rgb(51, 51, 51); font-family: 宋体;">处理</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">             }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            super.onPageStarted(view, url, favicon);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">        }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">在页面加载开始时调用。</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">6、public void onPageFinished(WebView view, String url) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            // TODO Auto-generated method stub</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            if (DEBUG) {</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">                Log.d(TAG, &quot; onPageFinished &quot;);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            }</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">            super.onPageFinished(view, url);</span><br/><span style="color: rgb(51, 51, 51); font-family: 宋体;">        }</span><div><span style="color: rgb(51, 51, 51); font-family: 宋体;">在页面加载结束时调用。</span></div></div></span>
</div></body></html> 