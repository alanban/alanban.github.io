<html>
<head>
  <title>关于CollapsingToolbarLayout 的使用与进阶</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303502 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="508"/>
<h1>关于CollapsingToolbarLayout 的使用与进阶</h1>

<div>
<span><div><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Android5.0 后 Google SDK陆续推出了 SupportDesign 包中的各类控件</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">其中最炫酷的就是今天+说的这个</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">先来看效果</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-align: center;"><a href="http://139.129.132.218/wp-content/uploads/2016/06/ezgif-3888208938.gif"><img src="关于CollapsingToolbarLayout 的使用与进阶_files/Image.gif" type="image/gif" alt="demo" height="auto" style="border: 0px;" width="480"/></a></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">可以看到 进入页面ToolBar是隐藏的 当滑动下面的ListView</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">页面上半部分会跟随手势做出变换</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><hr style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"/><span style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">Demo中运用到了</span><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><ul style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li>    CoordinatorLayout</li><li>    <span style="color: rgb(229, 51, 51);">CollapsingToolbarLayout</span></li><li>    NestedScrollView</li></ul><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><hr style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"/><span style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(229, 51, 51);">先来看一下布局文件：</span></span><pre style="padding: 0.5em; border-width: 0px 0px 0px 3px; border-left-style: solid; border-left-color: rgb(204, 204, 204); font-size: 13.1999998092651px; display: block; font-family: Consolas, Monaco, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace; margin: 1em 0px; white-space: pre;">
&lt;android.support.design.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/main_content&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:background=&quot;@color/colorWhite&quot;&gt;

    &lt;!--第一部分：伸缩工具栏--&gt;
    &lt;android.support.design.widget.AppBarLayout
        android:id=&quot;@+id/appbarLayout&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;
        app:elevation=&quot;0dp&quot;&gt;

        &lt;android.support.design.widget.CollapsingToolbarLayout
            android:id=&quot;@+id/collapsing_toolbar&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;match_parent&quot;
            app:contentScrim=&quot;?attr/colorPrimary&quot;
            app:expandedTitleMarginEnd=&quot;64dp&quot;
            app:expandedTitleMarginStart=&quot;48dp&quot;
            app:layout_scrollFlags=&quot;scroll|exitUntilCollapsed&quot;&gt;

            &lt;ImageView
                android:fitsSystemWindows=&quot;true&quot;
                android:id=&quot;@+id/backdrop&quot;
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;match_parent&quot;
                android:scaleType=&quot;centerCrop&quot;
                android:src=&quot;@mipmap/home_bg&quot;
                app:layout_collapseParallaxMultiplier=&quot;0.6&quot;
                app:layout_collapseMode=&quot;parallax&quot; /&gt;

            &lt;LinearLayout
                android:id=&quot;@+id/header&quot;
                android:fitsSystemWindows=&quot;true&quot;
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;match_parent&quot;
                android:background=&quot;@color/transparent&quot;
                android:orientation=&quot;vertical&quot;
                app:layout_collapseMode=&quot;parallax&quot;
                app:layout_collapseParallaxMultiplier=&quot;0.2&quot;
                app:layout_scrollFlags=&quot;scroll|enterAlways&quot;
                app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;&gt;

                &lt;RelativeLayout
                    android:id=&quot;@+id/toolbar&quot;
                    android:layout_width=&quot;match_parent&quot;
                    android:layout_height=&quot;44dp&quot;
                    android:background=&quot;@color/transparent&quot;&gt;

                    &lt;TextView
                        android:id=&quot;@+id/toolbar_title&quot;
                        android:layout_width=&quot;wrap_content&quot;
                        android:layout_height=&quot;wrap_content&quot;
                        android:layout_centerInParent=&quot;true&quot;
                        android:text=&quot;XXX医院&quot;
                        android:textColor=&quot;@color/colorWhite&quot;
                        android:textSize=&quot;17sp&quot; /&gt;

                    &lt;ImageView
                        android:id=&quot;@+id/toolbar_setting&quot;
                        android:layout_width=&quot;44dp&quot;
                        android:layout_height=&quot;44dp&quot;
                        android:layout_alignParentRight=&quot;true&quot;
                        android:layout_marginRight=&quot;15dp&quot; /&gt;
                &lt;/RelativeLayout&gt;

                &lt;LinearLayout
                    android:layout_width=&quot;match_parent&quot;
                    android:layout_height=&quot;wrap_content&quot;
                    android:orientation=&quot;horizontal&quot;&gt;

                    &lt;LinearLayout
                        android:layout_width=&quot;130dp&quot;
                        android:layout_height=&quot;176dp&quot;
                        android:layout_gravity=&quot;center_horizontal&quot;
                        android:orientation=&quot;vertical&quot;&gt;

                        &lt;ImageView
                            android:layout_width=&quot;90dp&quot;
                            android:layout_height=&quot;90dp&quot;
                            android:layout_gravity=&quot;center_horizontal&quot;
                            android:layout_marginTop=&quot;8dp&quot;
                            android:background=&quot;@drawable/ic_bg&quot;
                            android:contentDescription=&quot;头像&quot; /&gt;

                        &lt;TextView
                            android:layout_width=&quot;wrap_content&quot;
                            android:layout_height=&quot;wrap_content&quot;
                            android:layout_gravity=&quot;center_horizontal&quot;
                            android:text=&quot;XX&quot;
                            android:textColor=&quot;@color/colorWhite&quot;
                            android:textSize=&quot;18sp&quot; /&gt;

                        &lt;TextView
                            android:layout_width=&quot;wrap_content&quot;
                            android:layout_height=&quot;wrap_content&quot;
                            android:layout_gravity=&quot;center_horizontal&quot;
                            android:text=&quot;516345642&quot;
                            android:textColor=&quot;#50ffffff&quot; /&gt;

                    &lt;/LinearLayout&gt;

                    &lt;LinearLayout
                        android:layout_width=&quot;243dp&quot;
                        android:layout_height=&quot;176dp&quot;
                        android:orientation=&quot;vertical&quot;&gt;

                        &lt;LinearLayout
                            android:layout_width=&quot;213dp&quot;
                            android:layout_height=&quot;65dp&quot;
                            android:background=&quot;@drawable/home_health_bg&quot;
                            android:orientation=&quot;horizontal&quot;&gt;

                            &lt;TextView
                                android:layout_width=&quot;wrap_content&quot;
                                android:layout_height=&quot;wrap_content&quot;
                                android:layout_gravity=&quot;center_vertical&quot;
                                android:layout_marginLeft=&quot;10dp&quot;
                                android:text=&quot;血糖&quot; /&gt;

                            &lt;TextView
                                android:layout_width=&quot;45dp&quot;
                                android:layout_height=&quot;45dp&quot;
                                android:layout_gravity=&quot;center_vertical&quot;
                                android:layout_marginLeft=&quot;8dp&quot;
                                android:background=&quot;@drawable/stroke_sycle_bg&quot;
                                android:gravity=&quot;center&quot;
                                android:text=&quot;偏高&quot;
                                android:textColor=&quot;@color/colorWhite&quot;
                                android:textSize=&quot;12sp&quot; /&gt;

                            &lt;LinearLayout
                                android:layout_width=&quot;wrap_content&quot;
                                android:layout_height=&quot;wrap_content&quot;
                                android:layout_gravity=&quot;center_vertical&quot;
                                android:layout_marginLeft=&quot;8dp&quot;
                                android:orientation=&quot;vertical&quot;&gt;


                                &lt;TextView
                                    android:layout_width=&quot;wrap_content&quot;
                                    android:layout_height=&quot;wrap_content&quot;
                                    android:text=&quot;饭后 ： 7.0 mmol/L&quot;
                                    android:textColor=&quot;@color/colorWhite&quot;
                                    android:textSize=&quot;12sp&quot; /&gt;

                                &lt;TextView
                                    android:layout_width=&quot;wrap_content&quot;
                                    android:layout_height=&quot;wrap_content&quot;
                                    android:layout_marginTop=&quot;5dp&quot;
                                    android:text=&quot;饭后 ： 7.0 mmol/L&quot;
                                    android:textColor=&quot;@color/colorWhite&quot;
                                    android:textSize=&quot;12sp&quot; /&gt;

                            &lt;/LinearLayout&gt;
                        &lt;/LinearLayout&gt;

                        &lt;LinearLayout
                            android:layout_width=&quot;213dp&quot;
                            android:layout_height=&quot;65dp&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:background=&quot;@drawable/home_health_bg&quot;
                            android:orientation=&quot;horizontal&quot;&gt;

                            &lt;TextView
                                android:layout_width=&quot;wrap_content&quot;
                                android:layout_height=&quot;wrap_content&quot;
                                android:layout_gravity=&quot;center_vertical&quot;
                                android:layout_marginLeft=&quot;10dp&quot;
                                android:text=&quot;血压&quot; /&gt;

                            &lt;TextView
                                android:layout_width=&quot;45dp&quot;
                                android:layout_height=&quot;45dp&quot;
                                android:layout_gravity=&quot;center_vertical&quot;
                                android:layout_marginLeft=&quot;8dp&quot;
                                android:background=&quot;@drawable/stroke_sycle_bg&quot;
                                android:gravity=&quot;center&quot;
                                android:text=&quot;偏高&quot;
                                android:textColor=&quot;@color/colorWhite&quot;
                                android:textSize=&quot;12sp&quot; /&gt;

                            &lt;LinearLayout
                                android:layout_width=&quot;wrap_content&quot;
                                android:layout_height=&quot;wrap_content&quot;
                                android:layout_gravity=&quot;center_vertical&quot;
                                android:layout_marginLeft=&quot;8dp&quot;
                                android:orientation=&quot;vertical&quot;&gt;


                                &lt;TextView
                                    android:layout_width=&quot;wrap_content&quot;
                                    android:layout_height=&quot;wrap_content&quot;
                                    android:text=&quot;高压 ： 7.0 mmHg&quot;
                                    android:textColor=&quot;@color/colorWhite&quot;
                                    android:textSize=&quot;12sp&quot; /&gt;

                                &lt;TextView
                                    android:layout_width=&quot;wrap_content&quot;
                                    android:layout_height=&quot;wrap_content&quot;
                                    android:layout_marginTop=&quot;5dp&quot;
                                    android:text=&quot;低压 ： 7.0 mmHg&quot;
                                    android:textColor=&quot;@color/colorWhite&quot;
                                    android:textSize=&quot;12sp&quot; /&gt;

                            &lt;/LinearLayout&gt;
                        &lt;/LinearLayout&gt;

                    &lt;/LinearLayout&gt;

                &lt;/LinearLayout&gt;

                &lt;LinearLayout
                    android:layout_width=&quot;match_parent&quot;
                    android:layout_height=&quot;115dp&quot;
                    android:background=&quot;@color/colorWhite&quot;
                    android:orientation=&quot;horizontal&quot;&gt;

                    &lt;LinearLayout
                        android:id=&quot;@+id/home_health_records_ll&quot;
                        android:layout_width=&quot;wrap_content&quot;
                        android:layout_height=&quot;match_parent&quot;
                        android:layout_weight=&quot;1&quot;
                        android:gravity=&quot;center_horizontal&quot;
                        android:orientation=&quot;vertical&quot;&gt;

                        &lt;ImageView
                            android:layout_width=&quot;60dp&quot;
                            android:layout_height=&quot;60dp&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:background=&quot;@mipmap/ic_health_records&quot; /&gt;

                        &lt;TextView
                            android:layout_width=&quot;wrap_content&quot;
                            android:layout_height=&quot;wrap_content&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:text=&quot;健康日记&quot;
                            android:textColor=&quot;@color/colorBlack&quot;
                            android:textSize=&quot;12sp&quot; /&gt;
                    &lt;/LinearLayout&gt;

                    &lt;LinearLayout
                        android:id=&quot;@+id/home_health_ask_ll&quot;
                        android:layout_width=&quot;wrap_content&quot;
                        android:layout_height=&quot;match_parent&quot;
                        android:layout_weight=&quot;1&quot;
                        android:gravity=&quot;center_horizontal&quot;
                        android:orientation=&quot;vertical&quot;&gt;

                        &lt;ImageView
                            android:layout_width=&quot;60dp&quot;
                            android:layout_height=&quot;60dp&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:background=&quot;@mipmap/ic_health_ask&quot; /&gt;

                        &lt;TextView
                            android:layout_width=&quot;wrap_content&quot;
                            android:layout_height=&quot;wrap_content&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:text=&quot;问一问&quot;
                            android:textColor=&quot;@color/colorBlack&quot;
                            android:textSize=&quot;12sp&quot; /&gt;
                    &lt;/LinearLayout&gt;

                    &lt;LinearLayout
                        android:id=&quot;@+id/home_health_order_ll&quot;

                        android:layout_width=&quot;wrap_content&quot;
                        android:layout_height=&quot;match_parent&quot;
                        android:layout_weight=&quot;1&quot;
                        android:gravity=&quot;center_horizontal&quot;
                        android:orientation=&quot;vertical&quot;&gt;

                        &lt;ImageView
                            android:layout_width=&quot;60dp&quot;
                            android:layout_height=&quot;60dp&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:background=&quot;@mipmap/ic_health_order&quot; /&gt;

                        &lt;TextView
                            android:layout_width=&quot;wrap_content&quot;
                            android:layout_height=&quot;wrap_content&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:text=&quot;预约来院&quot;
                            android:textColor=&quot;@color/colorBlack&quot;
                            android:textSize=&quot;12sp&quot; /&gt;
                    &lt;/LinearLayout&gt;

                    &lt;LinearLayout
                        android:id=&quot;@+id/home_health_self_ll&quot;
                        android:layout_width=&quot;wrap_content&quot;
                        android:layout_height=&quot;match_parent&quot;
                        android:layout_weight=&quot;1&quot;
                        android:gravity=&quot;center_horizontal&quot;
                        android:orientation=&quot;vertical&quot;&gt;

                        &lt;ImageView
                            android:layout_width=&quot;60dp&quot;
                            android:layout_height=&quot;60dp&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:background=&quot;@mipmap/ic_health_self&quot; /&gt;

                        &lt;TextView
                            android:layout_width=&quot;wrap_content&quot;
                            android:layout_height=&quot;wrap_content&quot;
                            android:layout_marginTop=&quot;10dp&quot;
                            android:text=&quot;自助缴费&quot;
                            android:textColor=&quot;@color/colorBlack&quot;
                            android:textSize=&quot;12sp&quot; /&gt;
                    &lt;/LinearLayout&gt;

                &lt;/LinearLayout&gt;

                &lt;include layout=&quot;@layout/layout_home_notification_hint&quot; /&gt;

            &lt;/LinearLayout&gt;

            &lt;android.support.v7.widget.Toolbar
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;?attr/actionBarSize&quot;
                android:minHeight=&quot;?attr/actionBarSize&quot;
                app:layout_collapseMode=&quot;pin&quot;&gt;

                &lt;TextView
                    android:id=&quot;@+id/toolbar_title2&quot;
                    android:layout_width=&quot;match_parent&quot;
                    android:layout_height=&quot;wrap_content&quot;
                    android:gravity=&quot;center&quot;
                    android:text=&quot;消息中心&quot;
                    android:textColor=&quot;@color/colorWhite&quot;
                    android:textSize=&quot;18sp&quot;
                    android:visibility=&quot;gone&quot; /&gt;


            &lt;/android.support.v7.widget.Toolbar&gt;


        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;

    &lt;/android.support.design.widget.AppBarLayout&gt;

    &lt;android.support.v4.widget.NestedScrollView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;

        &lt;com.cj.nj.tcmh.widget.MyListView
            android:id=&quot;@+id/home_listView&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:layout_weight=&quot;1&quot;
            android:background=&quot;@color/colorWhite&quot;
            android:divider=&quot;@null&quot; /&gt;


    &lt;/android.support.v4.widget.NestedScrollView&gt;


&lt;/android.support.design.widget.CoordinatorLayout&gt;
</pre><hr style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"/><span style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none;">看完了布局 </span><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong>在通过效果 可以看出 其中在CollapsingToolbarLayout中 包含3个控件 </strong></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><ol style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li>    背景图片</li><li>    控件<br/></li><li>    ToolBar</li></ol><span style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">第一个控件 背景图片ImageView控件 可以看到属性 ：</span><pre style="padding: 0.5em; border-width: 0px 0px 0px 3px; border-left-style: solid; border-left-color: rgb(204, 204, 204); font-size: 13.1999998092651px; display: block; font-family: Consolas, Monaco, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace; margin: 1em 0px; white-space: pre;"><span style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">app:layout_collapseParallaxMultiplier=&quot;0.6&quot;</span></pre><span style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">这个属性 用于设置当NestedScrollview滑动时 ImageView 所对应做出的滑动效果的速度（视差因子）  数值为0~1</span><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">第二个控件是我们用来显示数据的 一个ViewGroup(LinearLayout)：</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></p><p style="word-wrap: break-word; margin: 5px 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="font-family: 'Comic Sans MS';">可以看到layout_scrollFlags属性 关于这个属性有以下值用于设置 用 | 来分割:</span></p><ul style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 16px; color: rgb(64, 64, 64); font-family: 'Microsoft YaHei', Verdana, sans-serif, SimSun; background-color: rgb(255, 255, 255);"><li><p style="word-wrap: break-word; margin: 5px 0px;"><span style="font-family: 'Comic Sans MS';">scroll - 想滚动就必须设置这个。</span></p></li><li><p style="word-wrap: break-word; margin: 5px 0px;"><span style="font-family: 'Comic Sans MS';">enterAlways - </span><span style="font-family: 'Comic Sans MS';">实现quick return效果, 当向下移动时，立即显示View（比如Toolbar)。</span></p></li><li><p style="word-wrap: break-word; margin: 5px 0px;"><span style="font-family: 'Comic Sans MS';">exitUntilCollapsed - </span><span style="font-family: 'Comic Sans MS';">向上滚动时收缩View，但可以固定Toolbar一直在上面。</span></p></li><li><p style="word-wrap: break-word; margin: 5px 0px;"><span style="font-family: 'Comic Sans MS';">enterAlwaysCollapsed - </span><span style="font-family: 'Comic Sans MS';">当你的View已经设置minHeight属性又使用此标志时，你的View只能以最小高度进入，只有当滚动视图到达顶部时才扩大到完整高度。</span></p></li><li><p style="word-wrap: break-word; margin: 5px 0px;"></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(64, 64, 64); font-family: 'Microsoft YaHei', Verdana, sans-serif, SimSun; font-size: 16px; background-color: rgb(255, 255, 255);"><span style="font-family: 'Comic Sans MS';">其中还设置了一些属性：</span></p></li><li style="list-style: none; display: inline"><ul style="font-size: 16px; color: rgb(64, 64, 64); font-family: 'Microsoft YaHei', Verdana, sans-serif, SimSun; background-color: rgb(255, 255, 255);"><li><p style="word-wrap: break-word; margin: 5px 0px;"><span style="font-family: 'Comic Sans MS';">contentScrim - 设置当完全CollapsingToolbarLayout折叠(收缩)后的背景颜色。</span></p></li><li><p style="word-wrap: break-word; margin: 5px 0px;"><span style="font-family: 'Comic Sans MS';">expandedTitleMarginStart - 设置扩张时候(还没有收缩时)title向左填充的距离。</span></p></li></ul></li><li><p style="word-wrap: break-word; margin: 5px 0px;"><br/></p><br/></li></ul><br style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"/><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">第三个控件是Toolbar 其中注意属性：</p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><pre style="color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
    app:layout_collapseMode=&quot;pin&quot; 
</pre><pre style="color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
这个属性代表 Toolbar在 视图滑动到顶部时 显示Toolbar
</pre><pre style="color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></pre><hr/><pre>
根据效果图  可以看出页面实现了 沉浸式状态栏
</pre><pre style="color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
实现是由 fitsSystemWindows 搭配代码实现
</pre><pre style="color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
以下是代码
</pre><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></p><pre style="padding: 0.5em; border-width: 0px 0px 0px 3px; border-left-style: solid; border-left-color: rgb(204, 204, 204); font-size: 13.1999998092651px; display: block; font-family: Consolas, Monaco, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace; margin: 1em 0px; white-space: pre; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
/**
         * 当版本号大于4.4时
         * 1）：设置 系统栏透明 布局可以延伸到系统栏
         * 2）：对内容布局设置一个 margin 不让（字体...）被系统栏图标挡住
         */
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
            Window window = getWindow();
            window.setFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS, WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);
            window.setFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION, WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION);
            CollapsingToolbarLayout.LayoutParams layoutParams = new CollapsingToolbarLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
            int high = ActivityUtil.getInstance().getStatusBarHeight(this);
            layoutParams.setMargins(0,high,0,0);
            ((LinearLayout)findViewById(R.id.header)).setLayoutParams(layoutParams);

        }
</pre><br style="color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"/><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></p><p style="word-wrap: break-word; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'sans serif', tahoma, verdana, helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></p></div><div><br/></div></span>
</div></body></html>
